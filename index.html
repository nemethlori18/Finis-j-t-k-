<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D√≠n√≥ j√°t√©k joystickkal</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color: white;
            font-family: Arial, sans-serif;
            margin: 0;
        }
        #score {
            font-size: 20px;
            margin-bottom: 10px;
        }
        #game {
            width: 200px;
            height: 200px;
            border: 2px solid black;
            position: relative;
            overflow: hidden;
            background-color: lightgray;
        }
        #dino {
            font-size: 24px;
            position: absolute;
            bottom: 10px;
            left: 10px;
        }
        .obstacle {
            font-size: 24px;
            position: absolute;
        }
        #joystick-container {
            position: relative;
            width: 100px;
            height: 100px;
            margin-top: 20px;
        }
        #joystick {
            width: 60px;
            height: 60px;
            background-color: gray;
            border-radius: 50%;
            position: absolute;
            left: 20px;
            top: 20px;
            touch-action: none;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            user-select: none;
            cursor: grab;
        }
    </style>
</head>
<body>
    <h2>D√≠n√≥ joystick j√°t√©k</h2>
    <div id="score">Pontsz√°m: 0</div>
    <div id="game">
        <div id="dino">ü¶ñ</div>
    </div>
    <div id="joystick-container">
        <div id="joystick">üéÆ</div>
    </div>

    <script>
        const gameArea = document.getElementById("game");
        const dino = document.getElementById("dino");
        const joystick = document.getElementById("joystick");
        const scoreDisplay = document.getElementById("score");

        let dinoX = 10, dinoY = 10;
        let score = 0;
        let joystickActive = false, joystickCenterX, joystickCenterY;

        joystick.addEventListener("touchstart", (event) => {
            joystickActive = true;
            const touch = event.touches[0];
            joystickCenterX = touch.clientX;
            joystickCenterY = touch.clientY;
        });

        document.addEventListener("touchmove", (event) => {
            if (!joystickActive) return;
            const touch = event.touches[0];
            let dx = touch.clientX - joystickCenterX;
            let dy = touch.clientY - joystickCenterY;

            dinoX += dx * 0.2;
            dinoY += dy * 0.2;
            moveDino();

            joystickCenterX = touch.clientX;
            joystickCenterY = touch.clientY;
        });

        document.addEventListener("touchend", () => {
            joystickActive = false;
        });

        function moveDino() {
            dinoX = Math.max(0, Math.min(gameArea.clientWidth - 24, dinoX));
            dinoY = Math.max(0, Math.min(gameArea.clientHeight - 24, dinoY));
            dino.style.left = dinoX + "px";
            dino.style.top = dinoY + "px";
        }

        function createObstacle() {
            const obstacle = document.createElement("div");
            obstacle.classList.add("obstacle");
            obstacle.innerText = "üéá";
            gameArea.appendChild(obstacle);

            let posX, posY, speedX, speedY;
            const randomSide = Math.floor(Math.random() * 4);

            switch (randomSide) {
                case 0: // Fel√ºlr≈ël j√∂n
                    posX = Math.random() * (gameArea.clientWidth - 24);
                    posY = -24;
                    speedX = 0;
                    speedY = 2;
                    break;
                case 1: // Alulr√≥l j√∂n
                    posX = Math.random() * (gameArea.clientWidth - 24);
                    posY = gameArea.clientHeight + 24;
                    speedX = 0;
                    speedY = -2;
                    break;
                case 2: // Balr√≥l j√∂n
                    posX = -24;
                    posY = Math.random() * (gameArea.clientHeight - 24);
                    speedX = 2;
                    speedY = 0;
                    break;
                case 3: // Jobbr√≥l j√∂n
                    posX = gameArea.clientWidth + 24;
                    posY = Math.random() * (gameArea.clientHeight - 24);
                    speedX = -2;
                    speedY = 0;
                    break;
            }

            obstacle.style.left = posX + "px";
            obstacle.style.top = posY + "px";

            function moveObstacle() {
                posX += speedX;
                posY += speedY;
                obstacle.style.left = posX + "px";
                obstacle.style.top = posY + "px";

                if (checkCollision(obstacle)) {
                    alert("Game Over! √öjraindul a j√°t√©k.");
                    location.reload();
                }

                if (posX > gameArea.clientWidth || posY > gameArea.clientHeight || posX < -24 || posY < -24) {
                    obstacle.remove();
                    score++; // N√∂veli a pontsz√°mot, ha az akad√°ly elt≈±nik
                    scoreDisplay.innerText = "Pontsz√°m: " + score;
                } else {
                    requestAnimationFrame(moveObstacle);
                }
            }

            moveObstacle();
        }

        function checkCollision(obstacle) {
            const dinoRect = dino.getBoundingClientRect();
            const obstacleRect = obstacle.getBoundingClientRect();
            return (
                dinoRect.left < obstacleRect.right &&
                dinoRect.right > obstacleRect.left &&
                dinoRect.top < obstacleRect.bottom &&
                dinoRect.bottom > obstacleRect.top
            );
        }

        setInterval(createObstacle, 2000);
    </script>
</body>
</html>