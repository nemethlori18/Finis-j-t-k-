<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D√≠n√≥ j√°t√©k joystickkal</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color: white;
            font-family: Arial, sans-serif;
            margin: 0;
        }
        #game {
            width: 200px;
            height: 200px;
            border: 2px solid black;
            position: relative;
            overflow: hidden;
            background-color: lightgray;
        }
        #dino {
            width: 20px;
            height: 20px;
            background-color: green;
            position: absolute;
            bottom: 10px;
            left: 10px;
        }
        .obstacle {
            width: 15px;
            height: 15px;
            background-color: red;
            position: absolute;
        }
        #joystick {
            width: 80px;
            height: 80px;
            background-color: gray;
            border-radius: 50%;
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            touch-action: none;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            user-select: none;
            cursor: grab;
        }
    </style>
</head>
<body>
    <h2>D√≠n√≥ joystick j√°t√©k</h2>
    <div id="game">
        <div id="dino">ü¶ñ</div>
    </div>
    <div id="joystick">üéÆ</div>

    <script>
        const gameArea = document.getElementById("game");
        const dino = document.getElementById("dino");
        const joystick = document.getElementById("joystick");
        let dinoX = 10, dinoY = 10, speed = 5;

        // Joystick mozgat√°s
        let isDragging = false;
        joystick.addEventListener("mousedown", () => isDragging = true);
        joystick.addEventListener("mouseup", () => isDragging = false);
        joystick.addEventListener("mouseleave", () => isDragging = false);
        document.addEventListener("mousemove", (event) => {
            if (!isDragging) return;
            dinoX += (event.movementX / 3);
            dinoY += (event.movementY / 3);
            moveDino();
        });

        function moveDino() {
            dinoX = Math.max(0, Math.min(gameArea.clientWidth - dino.clientWidth, dinoX));
            dinoY = Math.max(0, Math.min(gameArea.clientHeight - dino.clientHeight, dinoY));
            dino.style.left = dinoX + "px";
            dino.style.top = dinoY + "px";
        }

        function createObstacle() {
            const obstacle = document.createElement("div");
            obstacle.classList.add("obstacle");
            gameArea.appendChild(obstacle);

            const randomSide = Math.floor(Math.random() * 4); // 0 = top, 1 = bottom, 2 = left, 3 = right
            let posX, posY;

            switch (randomSide) {
                case 0: // Fentr≈ël j√∂n
                    posX = Math.random() * (gameArea.clientWidth - 15);
                    posY = -15;
                    break;
                case 1: // Lentr≈ël j√∂n
                    posX = Math.random() * (gameArea.clientWidth - 15);
                    posY = gameArea.clientHeight + 15;
                    break;
                case 2: // Balr√≥l j√∂n
                    posX = -15;
                    posY = Math.random() * (gameArea.clientHeight - 15);
                    break;
                case 3: // Jobbr√≥l j√∂n
                    posX = gameArea.clientWidth + 15;
                    posY = Math.random() * (gameArea.clientHeight - 15);
                    break;
            }

            obstacle.style.left = posX + "px";
            obstacle.style.top = posY + "px";

            const speedX = (gameArea.clientWidth / 2 - posX) / 100;
            const speedY = (gameArea.clientHeight / 2 - posY) / 100;

            function moveObstacle() {
                posX += speedX;
                posY += speedY;
                obstacle.style.left = posX + "px";
                obstacle.style.top = posY + "px";

                if (checkCollision(obstacle)) {
                    alert("Game Over! √öjraindul a j√°t√©k.");
                    location.reload();
                }

                if (posX > gameArea.clientWidth || posY > gameArea.clientHeight || posX < -15 || posY < -15) {
                    obstacle.remove();
                } else {
                    requestAnimationFrame(moveObstacle);
                }
            }

            moveObstacle();
        }

        function checkCollision(obstacle) {
            const dinoRect = dino.getBoundingClientRect();
            const obstacleRect = obstacle.getBoundingClientRect();
            return (
                dinoRect.left < obstacleRect.right &&
                dinoRect.right > obstacleRect.left &&
                dinoRect.top < obstacleRect.bottom &&
                dinoRect.bottom > obstacleRect.top
            );
        }

        setInterval(createObstacle, 2000);
    </script>
</body>
</html>