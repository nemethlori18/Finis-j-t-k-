<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>≈∞rhaj√≥s J√°t√©k</title>
    <style>
        body {
            text-align: center;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: white;
        }
        h1 {
            margin-top: 10px;
        }
        #pontszamlalo {
            font-size: 18px;
            margin-bottom: 10px;
        }
        #jatekter {
            width: 300px;
            height: 500px;
            background-color: gray;
            border: 2px solid black;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
        }
        #urhajo {
            width: 30px;
            height: 30px;
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
        }
        .akadaly {
            width: 30px;
            height: 30px;
            position: absolute;
            top: 0;
        }
        .powerup {
            width: 30px;
            height: 30px;
            position: absolute;
        }
        #eredmenytabla {
            margin-top: 10px;
        }
        #joystick-container {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 120px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        #joystick {
            width: 60px;
            height: 60px;
            background-color: black;
            border-radius: 50%;
            position: relative;
            cursor: grab;
        }
        #lovesGomb {
            position: absolute;
            bottom: 30px;
            right: 30px;
            width: 80px;
            height: 80px;
            background-color: red;
            color: white;
            font-size: 16px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>≈∞rhaj√≥s J√°t√©k</h1>
    <div id="pontszamlalo">Pontok: 0</div>
    <div id="jatekter">
        <img id="urhajo" src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/SpaceX_Falcon_9.svg/1200px-SpaceX_Falcon_9.svg.png" alt="≈∞rhaj√≥">
    </div>
    <div id="joystick-container">
        <div id="joystick"></div>
    </div>
    <button id="lovesGomb">L√∂v√©s</button>
    <h2>Eredm√©nyt√°bla</h2>
    <ul id="eredmenytabla"></ul>

    <script>
        const urhajo = document.getElementById("urhajo");
        const jatekter = document.getElementById("jatekter");
        const pontszamlalo = document.getElementById("pontszamlalo");
        const eredmenytabla = document.getElementById("eredmenytabla");
        const joystick = document.getElementById("joystick");
        const lovesGomb = document.getElementById("lovesGomb");

        let pontok = 0;
        let maxPontok = [];

        function veletlen(szam) {
            return Math.floor(Math.random() * szam);
        }

        function ujAkadaly() {
            let akadaly = document.createElement("div");
            akadaly.classList.add("akadaly");
            akadaly.style.left = veletlen(jatekter.clientWidth - 30) + "px";
            akadaly.style.top = "0px";
            akadaly.innerHTML = "üåë";
            jatekter.appendChild(akadaly);

            let sebesseg = Math.random() * 2 + 1;
            function mozgas() {
                let topErtek = parseInt(akadaly.style.top);
                if (topErtek < jatekter.clientHeight) {
                    akadaly.style.top = topErtek + sebesseg + "px";
                    requestAnimationFrame(mozgas);
                } else {
                    jatekter.removeChild(akadaly);
                    pontok++;
                    pontszamlalo.innerText = "Pontok: " + pontok;
                }
            }
            mozgas();
        }

        function ujPowerup() {
            let powerup = document.createElement("div");
            powerup.classList.add("powerup");
            powerup.style.left = veletlen(jatekter.clientWidth - 30) + "px";
            powerup.style.top = "0px";
            powerup.innerHTML = "üîÖ";
            jatekter.appendChild(powerup);

            let sebesseg = 2;
            function mozgas() {
                let topErtek = parseInt(powerup.style.top);
                if (topErtek < jatekter.clientHeight) {
                    powerup.style.top = topErtek + sebesseg + "px";
                    requestAnimationFrame(mozgas);
                } else {
                    jatekter.removeChild(powerup);
                }
            }
            mozgas();
        }

        function loves() {
            let lovedek = document.createElement("div");
            lovedek.classList.add("akadaly");
            lovedek.style.left = urhajo.offsetLeft + "px";
            lovedek.style.bottom = "30px";
            lovedek.innerHTML = "üî•";
            jatekter.appendChild(lovedek);

            function mozgas() {
                let bottomErtek = parseInt(lovedek.style.bottom);
                if (bottomErtek < jatekter.clientHeight) {
                    lovedek.style.bottom = bottomErtek + 5 + "px";
                    requestAnimationFrame(mozgas);
                } else {
                    jatekter.removeChild(lovedek);
                }
            }
            mozgas();
        }

        lovesGomb.addEventListener("click", loves);
        setInterval(ujAkadaly, 2000);
        setInterval(ujPowerup, 8000);

        let joystickX = 0, joystickY = 0;
        joystick.addEventListener("touchmove", (event) => {
            let touch = event.touches[0];
            let rect = joystick.getBoundingClientRect();
            let deltaX = touch.clientX - rect.left - joystick.clientWidth / 2;
            let deltaY = touch.clientY - rect.top - joystick.clientHeight / 2;
            
            let maxDistance = 40;
            let distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
            if (distance > maxDistance) {
                deltaX = (deltaX / distance) * maxDistance;
                deltaY = (deltaY / distance) * maxDistance;
            }

            joystick.style.transform = `translate(${deltaX}px, ${deltaY}px)`;

            urhajo.style.left = Math.max(0, Math.min(jatekter.clientWidth - 30, urhajo.offsetLeft + deltaX * 0.1)) + "px";
        });

        joystick.addEventListener("touchend", () => {
            joystick.style.transform = "translate(0, 0)";
        });
    </script>
</body>
</html>